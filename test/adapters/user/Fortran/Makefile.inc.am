check_PROGRAMS += user_f_test

user_f_test_SOURCES =                                       \
	$(SRC_ROOT)/test/adapters/user/Fortran/user_test.F

user_f_test_CPPFLAGS = \
    -I$(PUBLIC_INC_DIR)                     \
    -I$(INC_ROOT)src/adapters/include       \
    $(UTILS_CPPFLAGS)

if SCOREP_COMPILER_IBM
user_f_test_CPPFLAGS += -WF,-DSCOREP_USER_ENABLE=1
else
user_f_test_CPPFLAGS += -DSCOREP_USER_ENABLE=1
endif

if SCOREP_COMPILER_PGI
user_f_test_CPPFLAGS += -DSCOREP_COMPILER_PGI=1
endif

user_f_test_LDADD =                        \
    $(LIB_ROOT)libscorep_serial.la         \
    $(LIB_ROOT)libscorep_pomp_dummy.la

if HAVE_PAPI
user_f_test_LDFLAGS  = @SCOREP_PAPI_LDFLAGS@
endif

TESTS_SERIAL += ./user_f_test

EXTRA_DIST       += \
    $(SRC_ROOT)test/adapters/user/Fortran/selective.cfg \
    $(SRC_ROOT)test/adapters/user/Fortran/run_selective_test.sh.in

TESTS_SERIAL += ./../test/adapters/user/Fortran/run_selective_test.sh

## -*- mode: makefile -*-

## 
## This file is part of the Score-P software (http://www.score-p.org)
##
## Copyright (c) 2009-2011, 
##    RWTH Aachen University, Germany
##    Gesellschaft fuer numerische Simulation mbH Braunschweig, Germany
##    Technische Universitaet Dresden, Germany
##    University of Oregon, Eugene, USA
##    Forschungszentrum Juelich GmbH, Germany
##    German Research School for Simulation Sciences GmbH, Juelich/Aachen, Germany
##    Technische Universitaet Muenchen, Germany
##
## See the COPYING file in the package base directory for details.
##

## file       Makefile.cube_writer.inc.am
## maintainer Christian Roessel <c.roessel@fz-juelich.de>

if ! HAVE_EXTERNAL_CUBE_WRITER

# Get dependencies right: @CUBE_WRITER_LIBS@ in common_libadd is known
# only at configure time. automake therefore can't create dependencies
# at bootstrap time (which it does for hardcoded .la files). Ensure
# libscorep_cube_writer.la is build in the beginning.
BUILT_SOURCES += libscorep_cube_writer.la

noinst_LTLIBRARIES += libscorep_cube_writer.la
libscorep_cube_writer_la_SOURCES =                                      \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_cartesian.c            \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_cartesian.h            \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_cnode.c                \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_cnode.h                \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_compat_platform.c      \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_compat_platform.h      \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_cube.c                 \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_cube.h                 \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_cubew.c                \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_cubew.h                \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_direct_writing.h       \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_file_layout_embedded.h \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_file_layout_hybrid.h   \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_location.c             \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_location.h             \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_location_group.c       \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_location_group.h       \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_metric.c               \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_metric.h               \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_region.c               \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_region.h               \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_report_layouts.c       \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_report_layouts.h       \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_report_layouts_types.h \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_services.c             \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_services.h             \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_system_tree_node.c     \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_system_tree_node.h     \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_tar_writing.h          \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_types.h                \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_vector.h
libscorep_cube_writer_la_CPPFLAGS = \
    $(AM_CPPFLAGS) \
    -U_FORTIFY_SOURCE

endif

# These .c files are included in one of the above SOURCES and
# therefore need to in the distribution.
EXTRA_DIST += \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_direct_writing.c       \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_file_layout_embedded.c \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_file_layout_hybrid.c   \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_tar_writing.c
